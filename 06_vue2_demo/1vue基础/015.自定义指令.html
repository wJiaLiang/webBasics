<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>自定义指令</title>
</head>
<body>
    <div id="app">
        <input style="font-size:26px;" type="text" v-focus>

        <p v-highlight="'yellow'">高亮显示此文本亮黄色</p>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        var vm = new Vue({
            el:'#app',
            data:{

            },
            /*
            除了核心功能默认内置的指令 (v-model 和 v-show)，Vue 也允许注册自定义指令。
            注意，在 Vue2.0 中，代码复用和抽象的主要形式是组件。
            然而，有的情况下，你仍然需要对普通 DOM 元素进行底层操作，这时候就会用到自定义指令。
              https://cn.vuejs.org/v2/guide/custom-directive.html
               一个自定义指令可以提供以下几个钩子函数:
                bind   : 只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。
                inserted :  被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。
                update : 所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前
                componentUpdated :  指令所在组件的 VNode 及其子 VNode 全部更新后调用。
                unbind : 只调用一次，指令与元素解绑时调用。
                钩子函数参数
                el  指令所绑定的元素，可以用来直接操作 DOM。
                binding  一个对象，
                        包含以下 property：value 指令绑定的前一个值
                        expression：字符串形式的指令表达式。
                        arg：传给指令的参数
                vnode
                oldVnode
             */

            directives:{
                focus:{
                    inserted:function (el){
                        el.focus()
                    },
                    update:function (el,binding,vnode){
                        console.log(vnode)
                    }
                },
                highlight:{
                    bind(el, binding, vnode) {
                        console.log("hhh",binding)
                        el.style.background = binding.value
                    }
                }
            },
            beforeMount(){
                console.log(Vue.version);
            },
            computed:{

            },
            methods:{

            }
        })
    </script>

</body>
</html>